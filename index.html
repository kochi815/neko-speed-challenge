<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ã­ã“ã‚¹ãƒ”ãƒ¼ãƒ‰ãƒãƒ£ãƒ¬ãƒ³ã‚¸</title>
  <style>
    /* bodyã‚¿ã‚°ã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’çµ±åˆ */
    body {
      font-family: "Courier New", monospace;
      text-align: center;
      background-color: #fffaf0;
      margin: 0;
      padding: 10px;
      overflow-x: hidden; /* æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç¦æ­¢ */
      display: flex; /* #bodyã‹ã‚‰ç§»å‹• */
      flex-direction: column; /* #bodyã‹ã‚‰ç§»å‹• */
      justify-content: flex-start; /* #bodyã‹ã‚‰ç§»å‹• */
      align-items: center; /* #bodyã‹ã‚‰ç§»å‹• */
      min-height: 100vh; /* #bodyã‹ã‚‰ç§»å‹• */
      overflow-y: auto; /* #bodyã‹ã‚‰ç§»å‹• (åˆæœŸå€¤) */
      padding-bottom: 20px; /* #bodyã‹ã‚‰ç§»å‹• */
      height: 100%; /* html, bodyã‚»ãƒ¬ã‚¯ã‚¿ã‹ã‚‰ç§»å‹• */
    }
    /* htmlã‚¿ã‚°ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    html {
      height: 100%;
    }
    h1 {
      font-size: 2em;
    }
    #question {
      font-size: 4em;
      margin: 40px 0 20px 0;
    }
    #questionNumber, #timer, #titleBadge, #coinInfo {
      font-size: 1em;
      color: #555;
      margin: 5px 0;
    }
    #info {
      font-size: 1.2em;
      color: #666;
    }
    #startBtn, #homeBtn, #rankBtn {
      font-size: 1.2em;
      padding: 10px 30px;
      margin: 10px;
      border: none;
      border-radius: 10px;
      background-color: #ffb6c1; /* Light Pink */
      color: white;
      cursor: pointer;
      transition: background-color 0.2s; /* ãƒ›ãƒãƒ¼åŠ¹æœç”¨ */
    }
    #startBtn:hover, #homeBtn:hover, #rankBtn:hover {
        background-color: #ff9aaa; /* å°‘ã—æ¿ƒã„ãƒ”ãƒ³ã‚¯ */
    }

    #rankList {
      display: none;
      margin-top: 20px;
      background: #fff;
      padding: 15px;
      border-radius: 10px;
      text-align: left;
      font-size: 1em;
      max-width: 500px;
      width: 85%; /* ç”»é¢å¹…ã«å¿œã˜ã¦èª¿æ•´ */
      margin-left: auto;
      margin-right: auto;
      color: #333;
      border: 1px solid #eee; /* å¢ƒç•Œç·šã‚’å°‘ã—ã¤ã‘ã‚‹ */
      box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* å½±ã‚’ã¤ã‘ã‚‹ */
    }
    #rankList h2 {
        text-align: center; /* ä¸­å¤®æƒãˆ */
        margin-top: 0;
        color: #ff6347; /* Tomato */
    }
    #rankList ul {
        list-style: none;
        padding: 0;
    }
    #rankList li {
        margin-bottom: 8px; /* å„é …ç›®ã®é–“éš” */
        padding-bottom: 8px; /* ä¸‹ç·šã¨ã®é–“éš” */
        border-bottom: 1px dashed #eee; /* åŒºåˆ‡ã‚Šç·š */
    }
    #rankList li:last-child {
        border-bottom: none; /* æœ€å¾Œã®é …ç›®ã¯ç·šãªã— */
    }

    /* çµæœè¡¨ç¤ºç”¨ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚¹ã‚¿ã‚¤ãƒ« */
    .highlight {
      color: #ff6347; /* Tomatoè‰² */
      font-weight: bold;
    }

    /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œï¼ˆå°ã•ã„ç”»é¢å‘ã‘ï¼‰ */
    @media (max-width: 600px) {
        h1 {
            font-size: 1.8em;
        }
        #question {
            font-size: 3em;
            margin: 30px 0 15px 0;
        }
        #startBtn, #homeBtn, #rankBtn {
            font-size: 1em;
            padding: 12px 25px; /* å°‘ã—ç¸¦é•·ã« */
        }
        #rankList {
            width: 90%;
        }
    }

  </style>
</head>
<body>
  <h1>ã­ã“ã‚¹ãƒ”ãƒ¼ãƒ‰ãƒãƒ£ãƒ¬ãƒ³ã‚¸</h1>
  <div id="coinInfo">ğŸ’° ã­ã“ã‚³ã‚¤ãƒ³: 0</div>
  <div id="info">ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã­</div>
  <div id="questionNumber"></div>
  <div id="timer"></div>
  <div id="question">=^ï½¥Ï‰ï½¥^=</div>
  <div id="titleBadge"></div>
  <div id="rankList">
    <h2>ğŸ… ç§°å·ã¨å ±é…¬ä¸€è¦§</h2>
    <ul>
        <li>ğŸš€ å…‰é€Ÿã®ãƒã‚³ï¼š150ã‚³ã‚¤ãƒ³ï¼ˆï½30.0ç§’ï¼‰</li>
        <li>âœ¨ ç¥é€Ÿã®ãƒã‚³ï¼š130ã‚³ã‚¤ãƒ³ï¼ˆï½35.0ç§’ï¼‰</li>
        <li>âš¡ ã¨ã¦ã‚‚ã¯ã‚„ã­ã“ï¼š115ã‚³ã‚¤ãƒ³ï¼ˆï½38.0ç§’ï¼‰</li>
        <li>ğŸƒâ€â™‚ï¸ ã¯ã‚„ã­ã“ï¼š100ã‚³ã‚¤ãƒ³ï¼ˆï½41.0ç§’ï¼‰</li>
        <li>ğŸ¾ ã¡ã‚‡ã„ã¯ã‚„ã­ã“ï¼š90ã‚³ã‚¤ãƒ³ï¼ˆï½44.0ç§’ï¼‰</li>
        <li>ğŸ± ãŒã‚“ã°ã‚Šã­ã“ï¼š80ã‚³ã‚¤ãƒ³ï¼ˆï½47.0ç§’ï¼‰</li>
        <li>ğŸ˜º ãµã¤ã†ã­ã“ï¼š70ã‚³ã‚¤ãƒ³ï¼ˆï½50.0ç§’ï¼‰</li>
        <li>ğŸ˜¸ ãµã¤ã†ã‚ˆã‚Šã¡ã‚‡ã„ã®ã‚“ã³ã‚Šã­ã“ï¼š55ã‚³ã‚¤ãƒ³ï¼ˆï½53.0ç§’ï¼‰</li>
        <li>ğŸ¢ ã®ã‚“ã³ã‚Šã­ã“ï¼š45ã‚³ã‚¤ãƒ³ï¼ˆï½55.0ç§’ï¼‰</li>
        <li>ğŸ’¤ ã­ã‚€ãŸã„ã­ã“ï¼š30ã‚³ã‚¤ãƒ³ï¼ˆï½70.0ç§’ï¼‰</li>
        <li>ğŸŒ ã¾ã£ãŸã‚Šã­ã“ï¼š10ã‚³ã‚¤ãƒ³ï¼ˆ70.1ç§’ï½ï¼‰</li>
    </ul>
  </div>
  <button id="startBtn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
  <button id="homeBtn" style="display: none;">ãƒ›ãƒ¼ãƒ ã«ã‚‚ã©ã‚‹</button>
  <button id="rankBtn" style="display: inline-block;">ç§°å·ä¸€è¦§</button>

  <script>
    const totalQuestions = 30;
    let problems = [];
    let selected = [];
    let index = 0;
    let showingAnswer = false;
    let startTime = null;
    let gameStarted = false;
    let timerInterval;

    // DOMè¦ç´ å–å¾—
    const question = document.getElementById("question");
    const questionNumber = document.getElementById("questionNumber");
    const timer = document.getElementById("timer");
    const info = document.getElementById("info");
    const titleBadge = document.getElementById("titleBadge");
    const startBtn = document.getElementById("startBtn");
    const homeBtn = document.getElementById("homeBtn");
    const coinInfo = document.getElementById("coinInfo");
    const rankBtn = document.getElementById("rankBtn");
    const rankList = document.getElementById("rankList");

    // --- ç§°å·ã¨ã‚³ã‚¤ãƒ³ã®å®šç¾© ---
    const ranks = [
      { maxTime: 30.0, title: "ğŸš€ å…‰é€Ÿã®ãƒã‚³", coins: 150 },
      { maxTime: 35.0, title: "âœ¨ ç¥é€Ÿã®ãƒã‚³", coins: 130 },
      { maxTime: 38.0, title: "âš¡ ã¨ã¦ã‚‚ã¯ã‚„ã­ã“", coins: 115 },
      { maxTime: 41.0, title: "ğŸƒâ€â™‚ï¸ ã¯ã‚„ã­ã“", coins: 100 },
      { maxTime: 44.0, title: "ğŸ¾ ã¡ã‚‡ã„ã¯ã‚„ã­ã“", coins: 90 },
      { maxTime: 47.0, title: "ğŸ± ãŒã‚“ã°ã‚Šã­ã“", coins: 80 },
      { maxTime: 50.0, title: "ğŸ˜º ãµã¤ã†ã­ã“", coins: 70 },
      { maxTime: 53.0, title: "ğŸ˜¸ ãµã¤ã†ã‚ˆã‚Šã¡ã‚‡ã„ã®ã‚“ã³ã‚Šã­ã“", coins: 55 },
      { maxTime: 55.0, title: "ğŸ¢ ã®ã‚“ã³ã‚Šã­ã“", coins: 45 },
      { maxTime: 70.0, title: "ğŸ’¤ ã­ã‚€ãŸã„ã­ã“", coins: 30 },
      { maxTime: Infinity, title: "ğŸŒ ã¾ã£ãŸã‚Šã­ã“", coins: 10 } // æœ€å¾Œã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼
    ];

    // æ™‚é–“ã«å¿œã˜ãŸãƒ©ãƒ³ã‚¯æƒ…å ±ï¼ˆç§°å·ã¨ã‚³ã‚¤ãƒ³ï¼‰ã‚’å–å¾—ã™ã‚‹é–¢æ•°
    function getRank(time) {
      const numericTime = parseFloat(time); // æ¯”è¼ƒã®ãŸã‚ã«æ•°å€¤ã«å¤‰æ›
      for (const rank of ranks) {
        if (numericTime <= rank.maxTime) {
          return rank;
        }
      }
      // é€šå¸¸ã¯Infinityã§ã‚­ãƒ£ãƒƒãƒã•ã‚Œã‚‹ãŒã€å¿µã®ãŸã‚æœ€å¾Œã‚’è¿”ã™
      return ranks[ranks.length - 1];
    }

    // ç§°å·ä¸€è¦§ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    rankBtn.addEventListener("click", (e) => {
      e.preventDefault(); // ãƒœã‚¿ãƒ³ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œã‚’é˜²ã
      e.stopPropagation(); // ã‚¤ãƒ™ãƒ³ãƒˆã®ä¼æ’­ã‚’åœæ­¢ï¼ˆbodyã¸ã®ã‚¯ãƒªãƒƒã‚¯ã¨åŒºåˆ¥ï¼‰
      rankList.style.display = rankList.style.display === "none" ? "block" : "none";
    });

    // ç§°å·ä¸€è¦§ãƒœã‚¿ãƒ³ã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹é–¢æ•°
    function toggleRankButton(show) {
      rankBtn.style.display = show ? "inline-block" : "none";
    }

    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ã‚³ã‚¤ãƒ³ã‚’å–å¾—ã™ã‚‹é–¢æ•°
    function getCoins() {
      return parseInt(localStorage.getItem("coins") || "0");
    }

    // ã‚³ã‚¤ãƒ³ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã—ã€è¡¨ç¤ºã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
    function setCoins(value) {
      localStorage.setItem("coins", value);
      coinInfo.textContent = `ğŸ’° ã­ã“ã‚³ã‚¤ãƒ³: ${value}`;
    }

    // å•é¡Œã‚’ç”Ÿæˆã—ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹é–¢æ•°
    function generateProblems() {
      problems = [];
      // ä¹ä¹ (2x2 ã‹ã‚‰ 9x9)
      for (let a = 2; a < 10; a++) {
        for (let b = 2; b < 10; b++) {
          problems.push({ q: `${a} Ã— ${b}`, a: a * b });
          // å¯¾å¿œã™ã‚‹å‰²ã‚Šç®— (ä¾‹: 6x3=18 ãªã‚‰ 18Ã·6=3)
          // a*bãŒaã§å‰²ã‚Šåˆ‡ã‚Œã‚‹ã®ã¯è‡ªæ˜ã ãŒã€ä¸€å¿œå½¢å¼çš„ã«è¨˜è¿°
          if ((a * b) % a === 0) {
             problems.push({ q: `${a * b} Ã· ${a}`, a: b });
          }
          // bã§å‰²ã‚‹å•é¡Œã‚‚è¿½åŠ  (a=b ã®å ´åˆã‚’é™¤ã)
          if (a !== b && (a * b) % b === 0) {
             problems.push({ q: `${a * b} Ã· ${b}`, a: a });
          }
        }
      }

      // Fisher-Yates (Knuth) Shuffle ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§å•é¡Œã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
      for (let i = problems.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [problems[i], problems[j]] = [problems[j], problems[i]]; // è¦ç´ ã‚’å…¥ã‚Œæ›¿ãˆ
      }
      // ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã•ã‚ŒãŸå•é¡Œã‹ã‚‰æŒ‡å®šæ•°ã ã‘é¸æŠ
      selected = problems.slice(0, totalQuestions);
    }

    // ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤ºã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
    function updateTimer() {
      const now = Date.now();
      const elapsed = ((now - startTime) / 1000).toFixed(1); // ç§’å˜ä½ã€å°æ•°ç‚¹ä»¥ä¸‹1æ¡
      timer.textContent = `ã‚¿ã‚¤ãƒ : ${elapsed} ç§’`;
    }

    // æ¬¡ã®å•é¡Œã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
    function showQuestion() {
      if (index < selected.length) {
        questionNumber.textContent = `(${index + 1}/${totalQuestions})`; // å•é¡Œç•ªå·è¡¨ç¤º
        question.textContent = selected[index].q; // å•é¡Œæ–‡è¡¨ç¤º
        showingAnswer = false; // å›ç­”è¡¨ç¤ºãƒ•ãƒ©ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ
      } else {
        endGame(); // å…¨ã¦ã®å•é¡ŒãŒçµ‚ã‚ã£ãŸã‚‰ã‚²ãƒ¼ãƒ çµ‚äº†
      }
    }

    // ç¾åœ¨ã®å•é¡Œã®ç­”ãˆã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
    function showAnswer() {
      question.textContent = selected[index].a; // å›ç­”è¡¨ç¤º
      showingAnswer = true; // å›ç­”è¡¨ç¤ºãƒ•ãƒ©ã‚°ã‚’ã‚»ãƒƒãƒˆ
    }

    // ã‚¯ãƒªãƒƒã‚¯/ã‚¿ãƒƒãƒ—ã§æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«é€²ã‚€é–¢æ•° (å›ç­”è¡¨ç¤º/æ¬¡ã®å•é¡Œ)
    function nextStep() {
      if (!gameStarted) return; // ã‚²ãƒ¼ãƒ ãŒé–‹å§‹ã•ã‚Œã¦ã„ãªã‘ã‚Œã°ä½•ã‚‚ã—ãªã„

      if (!showingAnswer) {
        showAnswer(); // å•é¡Œè¡¨ç¤ºä¸­ãªã‚‰å›ç­”ã‚’è¡¨ç¤º
      } else {
        index++; // å›ç­”è¡¨ç¤ºä¸­ãªã‚‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’é€²ã‚ã¦
        showQuestion(); // æ¬¡ã®å•é¡Œã‚’è¡¨ç¤º
      }
    }

    // ã‚²ãƒ¼ãƒ çµ‚äº†æ™‚ã®å‡¦ç†ã‚’è¡Œã†é–¢æ•°
    function endGame() {
      toggleRankButton(true); // ç§°å·ä¸€è¦§ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
      clearInterval(timerInterval); // ã‚¿ã‚¤ãƒãƒ¼åœæ­¢
      gameStarted = false; // ã‚²ãƒ¼ãƒ çµ‚äº†ãƒ•ãƒ©ã‚°ã‚’ã‚»ãƒƒãƒˆ
      homeBtn.style.display = "inline-block"; // ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
      const endTime = Date.now();
      const elapsed = ((endTime - startTime) / 1000).toFixed(1); // çµŒéæ™‚é–“ã‚’è¨ˆç®—

      const resultRank = getRank(elapsed); // ã‚¿ã‚¤ãƒ ã‹ã‚‰ãƒ©ãƒ³ã‚¯æƒ…å ±ã‚’å–å¾—
      info.innerHTML = `<span class="highlight">ãŠã‚ã‚Šï¼ã‚¿ã‚¤ãƒ ï¼š${elapsed} ç§’</span>`; // çµæœè¡¨ç¤º
      titleBadge.textContent = resultRank.title; // ç§°å·è¡¨ç¤º

      const earned = resultRank.coins; // ç²å¾—ã‚³ã‚¤ãƒ³æ•°ã‚’å–å¾—
      const current = getCoins(); // ç¾åœ¨ã®ã‚³ã‚¤ãƒ³æ•°ã‚’å–å¾—
      setCoins(current + earned); // ã‚³ã‚¤ãƒ³ã‚’åŠ ç®—ã—ã¦ä¿å­˜ãƒ»è¡¨ç¤º

      // çµæœã‚¢ãƒ©ãƒ¼ãƒˆã‚’å°‘ã—é…ã‚Œã¦è¡¨ç¤º
      setTimeout(() => {
        alert(`ğŸ‰ ${earned} ã‚³ã‚¤ãƒ³ã‚’ç²å¾—ã—ãŸã‚ˆï¼`);
      }, 300);

      // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’å†åº¦æœ‰åŠ¹ã«ã™ã‚‹
      document.documentElement.style.overflowY = "auto";
      document.body.style.overflowY = "auto";
    }

    // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    startBtn.addEventListener("click", () => {
      // ã‚²ãƒ¼ãƒ ä¸­ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ç¦æ­¢
      document.documentElement.style.overflowY = "hidden";
      document.body.style.overflowY = "hidden";

      // UIåˆæœŸåŒ–
      questionNumber.textContent = "";
      timer.textContent = "";
      toggleRankButton(false); // ç§°å·ä¸€è¦§ãƒœã‚¿ãƒ³ã‚’éš ã™
      rankList.style.display = "none"; // ç§°å·ä¸€è¦§ãƒªã‚¹ãƒˆã‚‚éš ã™
      generateProblems(); // å•é¡Œç”Ÿæˆ
      index = 0; // å•é¡Œã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒªã‚»ãƒƒãƒˆ
      gameStarted = true; // ã‚²ãƒ¼ãƒ é–‹å§‹ãƒ•ãƒ©ã‚°
      startTime = Date.now(); // é–‹å§‹æ™‚é–“è¨˜éŒ²
      startBtn.style.display = "none"; // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³éè¡¨ç¤º
      homeBtn.style.display = "none"; // ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³éè¡¨ç¤º
      info.textContent = "ãŒã‚“ã°ã£ã¦ã­ï¼"; // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¤‰æ›´
      titleBadge.textContent = ""; // ç§°å·ãƒªã‚»ãƒƒãƒˆ
      showQuestion(); // æœ€åˆã®å•é¡Œè¡¨ç¤º
      timerInterval = setInterval(updateTimer, 100); // ã‚¿ã‚¤ãƒãƒ¼ã‚¹ã‚¿ãƒ¼ãƒˆ (100msæ¯æ›´æ–°)
    });

    // ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    homeBtn.addEventListener("click", () => {
      // ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ã‚²ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
      location.reload();
    });

    // bodyè¦ç´ ã¸ã®ã‚¯ãƒªãƒƒã‚¯ï¼ˆã‚¿ãƒƒãƒ—ï¼‰ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ (ã‚²ãƒ¼ãƒ é€²è¡Œç”¨)
    document.body.addEventListener("click", (e) => {
      // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸè¦ç´ ãŒãƒœã‚¿ãƒ³ï¼ˆã¾ãŸã¯ãã®ä¸­èº«ï¼‰ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯
      let targetElement = e.target;
      let isButton = false;
      const buttonIds = ["startBtn", "rankBtn", "homeBtn"];

      while (targetElement != null) {
          if (buttonIds.includes(targetElement.id)) {
              isButton = true;
              break; // ãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã£ãŸã‚‰ãƒ«ãƒ¼ãƒ—çµ‚äº†
          }
          // ç§°å·ä¸€è¦§(rankList)ã®ä¸­ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸå ´åˆã‚‚ç„¡è¦–ã™ã‚‹
          if (targetElement.id === "rankList") {
              isButton = true; // ãƒœã‚¿ãƒ³ã§ã¯ãªã„ãŒã€ç„¡è¦–ã™ã‚‹å¯¾è±¡ã¨ã—ã¦æ‰±ã†
              break;
          }
          targetElement = targetElement.parentElement; // è¦ªè¦ç´ ã‚’ãŸã©ã‚‹
      }

      // ãƒœã‚¿ãƒ³ã¾ãŸã¯ç§°å·ä¸€è¦§ä»¥å¤–ã®å ´æ‰€ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚‰ã‚²ãƒ¼ãƒ ã‚’é€²ã‚ã‚‹
      if (!isButton) {
        nextStep();
      }
    });

    // åˆæœŸã‚³ã‚¤ãƒ³è¡¨ç¤ºèª­ã¿è¾¼ã¿
    setCoins(getCoins());

    // --- ãŠã¾ã‘: ç”»é¢ã‚µã‚¤ã‚ºå¤‰æ›´æ™‚ã«ç§°å·ãƒªã‚¹ãƒˆãŒã¯ã¿å‡ºã•ãªã„ã‚ˆã†ã«èª¿æ•´ ---
    // (å¿…é ˆã§ã¯ãªã„ã§ã™ãŒã€ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã‚’å°‘ã—å¼·åŒ–)
    window.addEventListener('resize', () => {
        // å¿…è¦ã§ã‚ã‚Œã°ã€ã“ã“ã§è¦ç´ ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’èª¿æ•´ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ ã§ãã¾ã™
        // ä¾‹: rankListã®é«˜ã•ã‚’èª¿æ•´ã™ã‚‹ãªã©
    });

  </script>
</body>
</html>
